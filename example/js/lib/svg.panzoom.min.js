/*! svg.panzoom.js v1.1.1 MIT*/;!function(){"use strict";var t=function(t){return t.touches||(t.touches=[{clientX:t.clientX,clientY:t.clientY}]),t.touches};SVG.extend(SVG.Doc,SVG.Nested,{panZoom:function(e){var o=(e=e||{}).zoomFactor||.03,n=e.zoomMin||0,i=e.zoomMax||Number.MAX_VALUE;this.zoomMin=n,this.zoomMax=i;var s,h,c=!1,a=function(e){(h=t(e)).length<2||(e.preventDefault(),this.fire("pinchZoomStart",{event:e}).event().defaultPrevented||(this.off("touchstart",a),c=!0,SVG.on(document,"touchmove",u,this,{passive:!1}),SVG.on(document,"touchend",r,this,{passive:!1})))},r=function(t){t.preventDefault(),c=!1,this.fire("pinchZoomEnd",{event:t}),SVG.off(document,"touchmove",u),SVG.off(document,"touchend",r),this.on("touchstart",a)},u=function(e){e.preventDefault();var o=t(e),n=Math.sqrt(Math.pow(h[0].clientX-h[1].clientX,2)+Math.pow(h[0].clientY-h[1].clientY,2))/Math.sqrt(Math.pow(o[0].clientX-o[1].clientX,2)+Math.pow(o[0].clientY-o[1].clientY,2)),i={x:o[0].clientX+.5*(o[1].clientX-o[0].clientX),y:o[0].clientY+.5*(o[1].clientY-o[0].clientY)},s={x:h[0].clientX+.5*(h[1].clientX-h[0].clientX),y:h[0].clientY+.5*(h[1].clientY-h[0].clientY)},c=this.point(i.x,i.y),a=this.point(2*i.x-s.x,2*i.y-s.y),r=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(c.x,c.y).scale(n,0,0).translate(-a.x,-a.y));this.viewbox(r),h=o,this.fire("zoom",{box:r,focus:a})},l=function(e){e.preventDefault(),this.off("mousedown",l),h=t(e),c||(this.fire("panStart",{event:e}),s={x:h[0].clientX,y:h[0].clientY},SVG.on(document,"mousemove",f,this),SVG.on(document,"mouseup",m,this))},m=function(t){t.preventDefault(),this.fire("panEnd",{event:t}),SVG.off(document,"mousemove",f),SVG.off(document,"mouseup",m),this.on("mousedown",l)},f=function(e){e.preventDefault();var o=t(e),n={x:o[0].clientX,y:o[0].clientY},i=this.point(n.x,n.y),h=this.point(s.x,s.y),c=[h.x-i.x,h.y-i.y],a=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(c[0],c[1]));this.viewbox(a),s=n};return this.on("wheel",function(t){if(t.preventDefault(),0!=t.deltaY){var e=this.zoom()-o*t.deltaY/Math.abs(t.deltaY),n=this.point(t.clientX,t.clientY);this.zoom(e,n)}}),this.on("touchstart",a,this,{passive:!1}),this.on("mousedown",l,this),this},zoom:function(t,e){var o=window.getComputedStyle(this.node),n=parseFloat(o.getPropertyValue("width")),i=parseFloat(o.getPropertyValue("height")),s=this.viewbox(),h=n/s.width,c=i/s.height,a=Math.min(h,c);if(null==t)return a;this.zoomMax&&t>=this.zoomMax&&(t=this.zoomMax),this.zoomMin&&t<=this.zoomMin&&(t=this.zoomMin);var r=a/t;e=e||new SVG.Point(n/2/h+s.x,i/2/c+s.y);var u=new SVG.Box(s).transform((new SVG.Matrix).scale(r,e.x,e.y));return this.fire("zoom",{box:u,focus:e}).event().defaultPrevented?this:this.viewbox(u)}}),SVG.extend(SVG.FX,{zoom:function(t,e){return this.add("zoom",new SVG.Number(t),e)}})}();